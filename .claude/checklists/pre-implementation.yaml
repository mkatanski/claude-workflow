name: pre-implementation
description: Checks before starting story implementation
on_fail: warn

items:
  - name: "No uncommitted changes"
    type: bash
    command: "git status --porcelain | wc -l | tr -d ' '"
    expect: "0"
    severity: warning

  - name: "Dependencies installed"
    type: bash
    command: "pip check 2>&1 | grep -c 'No broken requirements' || echo '0'"
    expect: "1"
    severity: error

  - name: "Tests discoverable"
    type: bash
    command: "pytest --collect-only -q 2>/dev/null | grep -c 'test' || echo '0'"
    expect_not: "0"
    severity: info
