# Workflow with goto/loop functionality
# Tests: goto tool, conditional goto, loop counter, set tool

type: claude-workflow
version: 2

name: "Goto Loop Workflow"

claude:
  interactive: true
  dangerously_skip_permissions: true

tmux:
  split: vertical
  idle_time: 3.0

steps:
  - name: "Initialize counter"
    tool: set
    var: counter
    value: "1"

  - name: "Loop iteration"
    tool: bash
    command: "echo 'Iteration {counter}'"
    output_var: iteration_output

  - name: "Increment counter"
    tool: bash
    command: "echo $(( {counter} + 1 ))"
    output_var: counter

  - name: "Continue loop"
    tool: goto
    target: "Loop iteration"
    when: "{counter} <= 3"

  - name: "Final step"
    tool: bash
    command: "echo 'Loop completed'"
    output_var: final_output
